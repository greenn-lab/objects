# ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°

## 01. ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ

### ìš”êµ¬ì‚¬í•­ ì‚´í´ë³´ê¸°
1. "ì˜í™”" ì—ëŠ” ì œëª©, ìƒì˜ì‹œê°„ ê°€ê²©ì´ ìˆê³ ,
2. "ìƒì˜" ì€ ì‹¤ì œ ê´€ê°ë“¤ì´ ì˜í™”ë¥¼ ê´€ëŒí•˜ëŠ” ì‚¬ê±´ì„ í‘œí˜„í•˜ëŠ”ë°, í•œë²ˆ ì´ìƒ ìƒì˜í•  ìˆ˜ ìˆë‹¤ê³  í•´ìš”.
3. ì˜ˆë§¤ìëŠ” ìš”ê¸ˆ í• ì¸ì„ ë°›ëŠ”ë°
   - "í• ì¸ ì¡°ê±´"ì€ ê°€ê²© í• ì¸ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ê³ 
     - ìˆœì„œ ì¡°ê±´
     - ê¸°ê°„ ì¡°ê±´ì´ ìˆì–´ìš”.
   - "í• ì¸ ì •ì±…"ì€ í• ì¸ ìš”ê¸ˆì„ ê²°ì •í•˜ëŠ”ë°
     - ê¸ˆì•¡ í• ì¸ ì •ì±…
     - ë¹„ìœ¨ í• ì¸ ì •ì±…ì´ ìˆì–´ìš”.

<table>
<thead>
  <tr>
    <th>ì˜í™”</th>
    <th>í• ì¸ ì •ì±…</th>
    <th>í• ì¸ ì¡°ê±´</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td rowspan="4">ì•„ë°”íƒ€<br>(ê°€ê²©: 10,0000ì›)</td>
    <td rowspan="4">ê¸ˆì•¡ í• ì¸ ì •ì±…<br>(í• ì¸ì•¡: 800ì›)</td>
    <td>ìˆœë²ˆ ì¡°ê±´ / ì¡°ì¡° ìƒì˜</td>
  </tr>
  <tr>
    <td>ìˆœë²ˆ ì¡°ê±´ / 10íšŒ ìƒì˜</td>
  </tr>
  <tr>
    <td>ê¸°ê°„ ì¡°ê±´ / ì›”ìš”ì¼ 10:00~12:00 ìƒì˜ ì‹œì‘</td>
  </tr>
  <tr>
    <td>ê¸°ê°„ ì¡°ê±´ / ëª©ìš”ì¼ 18:00~12:00 ìƒì˜ ì‹œì‘</td>
  </tr>
</tbody>
<tbody>
  <tr>
    <td rowspan="3">íƒ€ì´íƒ€ë‹‰<br>(ê°€ê²©: 11,0000ì›)</td>
    <td rowspan="3">ê¸ˆì•¡ í• ì¸ ì •ì±…<br>(í• ì¸ë¥ : 10%)</td>
    <td>ê¸°ê°„ ì¡°ê±´ / í™”ìš”ì¼ 14:00~17:00 ìƒì˜ ì‹œì‘</td>
  </tr>
  <tr>
    <td>ìˆœë²ˆ ì¡°ê±´ / 2íšŒ ìƒì˜</td>
  </tr>
  <tr>
    <td>ê¸°ê°„ ì¡°ê±´ / ëª©ìš”ì¼ 10:00~14:00 ìƒì˜ ì‹œì‘</td>
  </tr>

</tbody>
<tbody>
  <tr>
    <td>ìŠ¤íƒ€ì›Œì¦ˆ:ê¹¨ì–´ë‚œí¬ìŠ¤<br>ê°€ê²©(10,000ì›)</td>
    <td>ì—†ìŒ</td>
    <td>ì—†ìŒ</td>
  </tr>
</tbody>
</table>

ì´ëŸ° ê·œì¹™ì˜ ì˜ˆì‹œì— ë§ì¶°ì„œ ì˜ˆë§¤ë¥¼ í•˜ë©´

| í•­ëª©   | ë‚´ìš©              |
| ---- | --------------- |
| ì œëª©   | ì•„ë°”íƒ€             |
| ìƒì˜ì •ë³´ | 00ë…„ 0ì›” 0ì¼ 7íšŒ 0ì‹œ |
| ì¸ì›   | 2ëª…              |
| ì •ê°€   | 20,000ì›         |
| ê²°ì œê¸ˆì•¡ | 18,400ì›         |

ì´ë ‡ê²Œ ëœë‹¤ëŠ” ê±°ì£ .

## 02. ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í–¥í•´

### í˜‘ë ¥, ê°ì²´, í´ë˜ìŠ¤
ì‹œì‘í•  ë•Œ ë¨¼ì € í´ë˜ìŠ¤ë¥¼ ê³ ë¯¼í•˜ì§€ ë§ë¼ê³  í•˜ë„¤ìš”.
1. ì–´ë–¤ í´ë˜ìŠ¤ ì „ì— ì–´ë–¤ ê°ì²´ë“¤ì´ í•„ìš”í•œì§€ ê³ ë¯¼í•˜ê³ 
2. ê°ì²´ë¥¼ ë…ë¦½ì ì¸ ì¡´ì¬ê°€ ì•„ë‹Œ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ í˜‘ë ¥í•˜ëŠ” ê³µë™ì²´ì˜ ì¼ì›ìœ¼ë¡œ ë³´ë˜ìš”.

### ë„ë©”ì¸ì˜ êµ¬ì¡°ë¥¼ ë”°ë¥´ëŠ” í”„ë¡œê·¸ë¨ êµ¬ì¡°
**ë„ë©”ì¸(domain)** ì´ë¼ëŠ” ìš©ì–´ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <u>*ì‚¬ìš©ìê°€ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ëŠ” ë¶„ì•¼*</u>ë¥¼ ì¼ì»«ëŠ”ë‹¤ê³  í•´ìš”.

ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì€ ë„ë©”ì¸ì„ êµ¬ì„±í•˜ëŠ” ê°œë…ë“¤ì´ ë§¤ë„ëŸ½ê²Œ ê°ì²´ì™€ í´ë˜ìŠ¤ë¡œ ì—°ê²°ë˜ê³ ìš”.

![ì˜í™” ì˜ˆë§¤ ë„ë©”ì¸ì„ êµ¬ì„±í•˜ëŠ” íƒ€ì…ë“¤ì˜ êµ¬ì¡°](02-001.svg)

ì¼ë°˜ì ìœ¼ë¡œ ë„ë©”ì¸ ê°œë…ì˜ ì´ë¦„ê³¼ ë™ì¼í•˜ê±°ë‚˜ ìœ ì‚¬í•˜ê²Œ í´ë˜ìŠ¤ ì´ë¦„ì„ ì§“ê³ , í´ë˜ìŠ¤ êµ¬ì¡° ë˜í•œ ë„ë©”ì¸ êµ¬ì¡°ì™€ ìœ ì‚¬í•œ í˜•íƒœë¥¼ ë ì–´ì•¼ í•œëŒ€ìš”.

![ë„ë©”ì¸ ê°œë…ì˜ êµ¬ì¡°ë¥¼ ë”°ë¥´ëŠ” í´ë˜ìŠ¤ êµ¬ì¡°](02-002.svg)

### í´ë˜ìŠ¤ êµ¬í˜„í•˜ê¸°
```java
public class Screening {
  private Movie movie;
  private int sequence;
  private LocalDateTime whenScreened;
  
  public LocalDateTime getStartTime() {
    return whenScreened;
  }
  
  public boolean isSequence(int sequence) {
    return this.sequence == sequence;
  }

  public Money getMovieFee() {
    return movie.getFee();
  }
}
```
ì ‘ê·¼ìˆ˜ì •ìì— ì£¼ëª©í•˜ë„¤ìš”. privateê³¼ publicì„ ì ì ˆíˆ êµ¬ë¶„í•´ì„œ ê°ì²´ì˜ ììœ¨ì„±ì„ ë³´ì¥í•˜ê³ , ê°œë°œìì—ê²Œ êµ¬í˜„ì˜ ììœ ë¥¼ ì œê³µí•œëŒ€ìš”. ~~ì§€ê¸ˆê¹Œì§€ ì´ëŸ° ììœ ë¥¼ ë§Œë½í•´ë³¸ì ì´ ì—†ëŠ” ê²ƒ ê°™ì€ë°...~~ 

#### ììœ¨ì ì¸ ê°ì²´
ì¤‘ìš”í•œ ì‚¬ì‹¤,
1. ê°ì²´ëŠ” ìƒíƒœ(state)ì™€ í–‰ë™(behavior)ë¥¼ ê°€ì§€ëŠ” ì¡´ì¬ì´ê³ ,
2. ê°ì²´ëŠ” ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•˜ê³  í–‰ë™í•˜ëŠ” **ììœ¨ì ì¸ ì¡´ì¬**ë¼ëŠ” ê²ƒ ì´ë˜ìš”.

ê°ì²´ì˜ ìƒíƒœì™€ í–‰ë™ì„ ë‚´ë¶€ì—ì„œ í•¨ê»˜ ë¬¶ëŠ” ê²ƒì„ **ìº¡ìŠí™”**ë¼ê³  í•˜ê³ ,
ìº¡ìŠí™”ëœ ìƒíƒœë‚˜ í–‰ë™ì„ **ì ‘ê·¼ ì œì–´(Access control)** í•  ìˆ˜ ìˆë„ë¡ public, protected, private ë“±ê³¼ ê°™ì€ **ì ‘ê·¼ ìˆ˜ì •ì(Access modifier)** ê°€ ìˆëŒ€ìš”.

ê·¸ë ‡ê²Œ ì ‘ê·¼ ìˆ˜ì •ìë¡œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì´ë¥¼ **Public Interface** ë¼ê³  ë¶€ë¥´ê³ , ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ê³  ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ê±¸ **êµ¬í˜„(Implementation)** ì´ë¼ê³  ë¶€ë¥¸ëŒ€ìš”.  
ì´ë ‡ê²Œ **ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì˜ ë¶„ë¦¬(ISP)** ëŠ” ì„¤ê³„ì˜ ì›ì¹™ì´ ë˜ëŠ” ê±°ë„¤ìš”.

#### í”„ë¡œê·¸ë˜ë¨¸ì˜ ììœ 
í´ë˜ìŠ¤ ì‘ì„±ì(Class creator)ì™€ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë˜ë¨¸(Client Programmer)ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²Œ ìœ ìš©í•˜ë‹¤ í•˜ë„¤ìš”.
ì´ëŸ¬ë©´ êµ¬í˜„ì²´ì— ëŒ€í•œ ì ‘ê·¼ì´ ì œí•œë˜ë©´ì„œ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ììœ¨ì„±ì´ ë³´ì¥ë˜ê³ , ì´ë¥¼ **êµ¬í˜„ ì€ë‹‰(Implementation hiding)** ì´ë¼ê³  ë¶€ë¥´ê³ ìš”.

### í˜‘ë ¥í•˜ëŠ” ê°ì²´ë“¤ì˜ ê³µë™ì²´
`Screening.reserve(...)` ë¥¼ ë³´ë©´ `calculateFee` ë¼ëŠ” private ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ìš”ê¸ˆì„ ê³„ì‚°í•´ìš”.
```java
public class Screening {
  ...

  public Reservation reserve(Customer customer, int audienceCount) {
    return new Reservation(customer, this, calculateFee(audienceCount), audienceCount);
  }

  private Money calculateFee(int audienceCount) {
    return movie.calculationMovieFee(this).times(audienceCount);
  }
    
  ...
}
```

```java
public class Reservation {
  private Customer customer;
  private Screening Screening;
  private Money fee;
  private int audienceCount;

  public Reservation(Customer customer, Screening Screening, Money fee, int audienceCount) {
    this.customer = customer;
    this.Screening = Screening;
    this.fee = fee;
    this.audienceCount = audienceCount;
  }
}
```
ì˜ˆë§¤ë¥¼ ìœ„í•´ `Screening`, `Movie`, `Reservation` ì€ ì„œë¡œë¥¼ í˜¸ì¶œí•˜ë©° ìƒí˜¸ì‘ìš© í•˜ëŠ”ë° ì´ë¥¼ **í˜‘ë ¥(Collaboration)** ì´ë¼ê³  ë¶€ë¥¸ëŒ€ìš”.

![]()

### í˜‘ë ¥ì— ê´€í•œ ì§§ì€ ì´ì•¼ê¸°
ê° ê°ì²´ ê°„ì—ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì„ í•œëŒ€ìš”. ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ” ê±´ë°, ê·¸ ìœ ì¼í•œ ë°©ë²•ì€ **ë©”ì„¸ì§€ë¥¼ ì „ì†¡(send a message)** ì´ê³ , **ë©”ì„¸ì§€ë¥¼ ìˆ˜ì‹ (receive a message)** ì´ê³ ìš”.  
ë©”ì„¸ì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ìì‹ ë§Œì˜ ë°©ë²•ë²•ì„ **ë©”ì„œë“œ(method)** ë¼ê³  ë¶€ë¥´ê³ ìš”.

ì´ëŸ° ë©”ì„œë“œì™€ ë©”ì„¸ì§€ë¥¼ ì˜ êµ¬ë¶„í•˜ëŠ” ê²ƒì—ì„œ ë¶€í„° **ë‹¤í˜•ì„±(polymorphism)** ì˜ ê°œë…ì´ ì¶œë°œ í•œëŒ€ìš”.

## 03. í• ì¸ ìš”ê¸ˆ êµ¬í•˜ê¸°

### í• ì¸ ìš”ê¸ˆ ê³„ì‚°ì„ ìœ„í•œ í˜‘ë ¥ ì‹œì‘í•˜ê¸°
```java
public class Movie {
  private String title;
  private Duration runningTime;
  private Money fee;
  private DiscountPolicy discountPolicy;

  public Movie(String title, Duration runningTime, Money fee, DiscountPolicy discountPolicy) {
    this.title = title;
    this.runningTime = runningTime;
    this.fee = fee;
    this.discountPolicy = discountPolicy;
  }

  public Money getFee() {
    return fee;
  }

  public Money calculateMovieFee(Screening screening) {
    return fee.minus(discountPolicy.calculateDiscountAmount(screening));
  }
}
```
`calculateMovieFee` ë©”ì„œë“œëŠ” `discountPolicy` ì— `calculateDiscountAmount(...)` ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•´ì„œ í• ì¸ ìš”ê¸ˆì„ ê³„ì‚°í•´ìš”. ì—¬ê¸°ì„œ ì´ìƒí•œ ì !  
ì´ ë©”ì„œë“œëŠ” ì–´ë–¤ í• ì¸ ì •ì±…ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ê²°ì •í•˜ëŠ” ë¶€ë¶„ì´ ì—†ì´ `discountPolicy` ì— ë©”ì„¸ì§€ë¥¼ ë³´ë‚¼ ë¿.

ìµìˆ™ì¹˜ ì•Šìœ¼ë©´ ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì— ìµìˆ™í•˜ì§€ ì•Šì€ê±°ë˜ìš”. ğŸ˜­
1. **ìƒì†(inheritance)** ê³¼
2. **ë‹¤í˜•ì„±** ì´ ìˆ¨ê²¨ì ¸ ìˆì—ˆëŒ€ìš”.

ê·¸ë¦¬ê³  ê·¸ ê¸°ë°˜ì— **ì¶”ìƒí™”(abstraction)** ë¼ëŠ” ì›ë¦¬ê°€ ìˆ¨ì–´ ìˆë‹¤ëŠ”ë°...

### í• ì¸ ì •ì±…ê³¼ í• ì¸ ì¡°ê±´
í• ì¸ ì •ì±…ë³„ë¡œ ìœ ì‚¬í•œ ê¸°ëŠ¥ì´ ìˆê¸° ë•Œë¬¸ì— **ì¶”ìƒ í´ë˜ìŠ¤(abstract class)** ë¡œ êµ¬í˜„í•´ìš”.
```java
public abstract class DiscountPolicy {
  private List<DiscountCondition> conditions = new ArrayList<>();

  public DiscountPolicy(DiscountCondition... conditions) {
    this.conditions = Arrays.asList(conditions);
  }

  public Money calculateDiscountAmount(Screening screening) {
    for (DiscountCondition each : conditions) {
      if (each.isSatisfiedBy(screening)) {
        return getDiscountAmount(screening);
      }
    }

    return Money.ZERO;
  }

  abstract protected Money getDiscountAmount(Screening Screening);
}
```
**ì¶”ìƒ ë©”ì„œë“œ(Abstract method)** ë¥¼ ì‚¬ìš©í•´ì„œ ê° í• ì¸ ì •ì±…ë³„ë¡œ ìš”ê¸ˆ ê³„ì‚°ì„ í•´ìš”. ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ê¸°ë³¸ì ì¸ ì²˜ë¦¬ë¥¼ í•˜ê³  ìì‹ í´ë˜ìŠ¤ì—ê²Œ ì„¸ë¶€ ì²˜ë¦¬ë¥¼ ì´ì„í•˜ëŠ” ê±¸ **TEMPLATE METHOD íŒ¨í„´** ì´ë¼ê³  ë¶€ë¥´ëŠ” êµ°ìš”.

```java
public interface DiscountCondition {
    boolean isSatisfiedBy(Screening screening);
}
```
í• ì¸ ì¡°ê±´ì— ë§Œì¡±í•˜ëŠ”ì§€ë¥¼ íŒë‹¨í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³ ,

```java
public class SequenceCondition implements DiscountCondition {
    private int sequence;

    public SequenceCondition(int sequence) {
        this.sequence = sequence;
    }

    public boolean isSatisfiedBy(Screening screening) {
        return screening.isSequence(sequence);
    }
}
```
ìƒì˜ ìˆœë²ˆìœ¼ë¡œ í• ì¸í•˜ëŠ” êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ìš”.

```java
public class PeriodCondition implements DiscountCondition {
  private DayOfWeek dayOfWeek;
  private LocalTime startTime;
  private LocalTime endTime;

  public PeriodCondition(DayOfWeek dayOfWeek, LocalTime startTime, LocalTime endTime) {
    this.dayOfWeek = dayOfWeek;
    this.startTime = startTime;
    this.endTime = endTime;
  }

  public boolean isSatisfiedBy(Screening screening) {
    return screening.getStartTime().getDayOfWeek().equals(dayOfWeek) &&
        startTime.compareTo(screening.getStartTime().toLocalTime()) <= 0 &&
        endTime.compareTo(screening.getStartTime().toLocalTime()) >= 0;
  }
}
```
íŠ¹ì • ê¸°ê°„ìœ¼ë¡œ í• ì¸í•˜ëŠ” êµ¬í˜„ì²´ë„ ë§Œë“¤ê³ ìš”.

```java
public class AmountDiscountPolicy extends DiscountPolicy {
  private Money discountAmount;

  public AmountDiscountPolicy(Money discountAmount, DiscountCondition... conditions) {
    super(conditions);
    this.discountAmount = discountAmount;
  }

  @Override
  protected Money getDiscountAmount(Screening screening) {
    return discountAmount;
  }
}
```
ì´ì œëŠ” ì •ì±…ì„ êµ¬í˜„í•´ìš”. ì¼ì •í•œ í• ì¸ ì¡°ê±´ì„ ë§Œì¡±í•  ê²½ìš° ì¼ì •í•œ ê¸ˆì•¡ì„ í• ì¸í•´ì£¼ëŠ” ê¸ˆì•¡ í• ì¸ ì •ì±…ì˜ êµ¬í˜„ì²´ ì—ìš”.

```java
public class PercentDiscountPolicy extends DiscountPolicy {
  private double percent;

  public PercentDiscountPolicy(double percent, DiscountCondition... conditions) {
    super(conditions);
    this.percent = percent;
  }

  @Override
  protected Money getDiscountAmount(Screening screening) {
    return screening.getMovieFee().times(percent);
  }
}
```
í• ì¸ ë¹„ìœ¨ì„ ì°¨ê°í•˜ëŠ” êµ¬í˜„ì²´ ê³ ìš”.

![]()

## 04. ìƒì†ê³¼ ë‹¤í˜•ì„±

### ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°
`AmountDiscountPolicy` ì™€ `PercentDiscountPolicy` ëŠ” `DiscountPolicy` ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì£ .  
ì´ì²˜ëŸ¼ ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ë‹¤ë¥¸ ë¶€ë¶„ë§Œì„ ì¶”ê°€í•´ì„œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ë§Œë“œëŠ”ê²Œ **ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°(Programming by difference)** ë¼ê³  í•œëŒ€ìš”.

### ìƒì†ê³¼ ì¸í„°í˜ì´ìŠ¤
ì¸í„°í˜ì´ìŠ¤ë¥¼ í¬í•¨í•˜ê²Œ ë˜ëŠ” ìì‹ í´ë˜ìŠ¤ë“¤ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ë™ì¼í•œ íƒ€ì…ìœ¼ë¡œ ê°„ì£¼ í•  ìˆ˜ ìˆì–´ìš”.
`Movie.calculateMovieFee(...)` ë¥¼ ë³´ë©´ `AmountDiscountPolicy` ì™€ `PercentDiscountPolicy` ëª¨ë‘ `DiscountPolicy` ë¥¼ ëŒ€ì‹ í•´ì„œ `Movie`ì™€ í˜‘ë ¥ í•  ìˆ˜ ìˆëŠ” ê±°ì£ .  
ì´ëŸ° ì‹ìœ¼ë¡œ ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ëŒ€ì‹ í•˜ëŠ” ê±¸ **ì—…ìºìŠ¤íŒ…(upcasting)** ì´ë¼ê³  ë¶€ë¥¸ëŒ€ìš”.

### ë‹¤í˜•ì„±
ì½”ë“œ ìƒì—ì„œ `Movie` ëŠ” `DiscountPolicy` ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì–´ë–¤ ë©”ì„œë“œ(êµ¬í˜„ì²´)ê°€ ì‹¤í–‰ ë  ì§€ëŠ” ìˆ˜ì‹ í•˜ëŠ” ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ë¬´ì—‡ì´ë‚˜ ë”°ë¼ ë‹¬ë¼ì§€ì–ì•„ìš”. ì´ê±¸ **ë‹¤í˜•ì„±** ì´ë¼ê³  ë¶€ë¥¸ëŒ€ìš”.

## 05. ì¶”ìƒí™”ì™€ ìœ ì—°ì„±

### ì¶”ìƒí™”ì˜ í˜
í• ì¸ ì •ì±…ì€ ê¸ˆì•¡ê³¼ ë¹„ìœ¨ í• ì¸ ì •ì±…ì„ í¬ê´„í•˜ëŠ” ì¶”ìƒì ì¸ ê°œë…ì´ì—ìš”. í• ì¸ ì¡°ê±´ë„ ë§ˆì°¬ê°€ì§€ê³ ìš”.

ì¶”ìƒí™”ë¡œ ì–»ëŠ” ì¥ì ì€ 
- ìš”êµ¬ì‚¬í•­ì˜ ì •ì±…ì„ ë†’ì€ ìˆ˜ì¤€ì—ì„œ ì„œìˆ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒê³¼
- ì„¤ê³„ê°€ ì¢€ë” ìœ ì—°í•´ ì§„ë‹¤ëŠ” ê²ƒ ì´ë˜ìš”.

### ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ íŠ¸ë ˆì´ë“œì˜¤í”„
```java
public interface DiscountPolicy {
  Money calculateDiscountAmount(Screening screening);
}
```
`DiscountPolicy` ë¥¼ interface ë¡œ ë°”ê¾¸ê³ , `DefaultDiscountPolicy` ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ìš”.

```java
public abstract class DefaultDiscountPolicy implements DiscountPolicy {
  private List<DiscountCondition> conditions = new ArrayList<>();

  public DefaultDiscountPolicy(DiscountCondition... conditions) {
    this.conditions = Arrays.asList(conditions);
  }

  @Override
  public Money calculateDiscountAmount(Screening screening) {
    for (DiscountCondition each : conditions) {
      if (each.isSatisfiedBy(screening)) {
        return getDiscountAmount(screening);
      }
    }

    return Money.ZERO;
  }

  protected abstract Money getDiscountAmount(Screening Screening);
}
```
ê·¸ë¦¬ê³  `NonDiscountPolicy` ê°€ `DisplayPolicy` ë¥¼ êµ¬í˜„í•˜ë©´ ê°œë…ì ì¸ í˜¼ë€ê³¼ ê²°í•©ì„ ì œê±°í•  ìˆ˜ ìˆëŒ€ìš”.
```java
public class NonDiscountPolicy implements DiscountPolicy {
    @Override
    public Money calculateDiscountAmount(Screening screening) {
        return Money.ZERO;
    }
}
```

![]()

ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ ê²ƒì´ ë” ì¢‹ì€ ì„¤ê³„ë¼ë„¤ìš”. ê³¼í•œ ë“¯ ì‹¶ì§€ë§Œ ì´ëŸ° êµ¬í˜„ê³¼ ê´€ë ¨ëœ ëª¨ë“  ì‚¬í•­ì´ íŠ¸ë ˆì´ë“œ ì˜¤í”„ì˜ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤ê³  ë³´ì—¬ì¤€ ê²ƒ ê°™ì•„ìš”.

### í•©ì„±
ìƒì†ë³´ë‹¤ **í•©ì„±(composition)** ì´ ë” ì¢‹ì€ ë°©ë²•ì´ë¼ëŠ” ì´ì•¼ê¸°ë¥¼ ë§ì´ ë“¤ì—ˆì–´ìš”.

ìƒì†ì´ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ ë©”ì„¸ì§€ë¥¼ í†µí•´ì„œë§Œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ **í•©ì„±** ì´ë¼ê³  ë¶€ë¥¸ëŒ€ìš”.
ì´ëŠ”
 - êµ¬í˜„ì„ íš¨ê³¼ì ìœ¼ë¡œ ìº¡ìŠí™” í•  ìˆ˜ ìˆê³ ,
 - ì˜ì¡´í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµì²´í•˜ëŠ” ê²ƒì´ ë¹„êµì  ì‰¬ì›Œì„œ

ìƒì†ì´ ê°€ì§€ëŠ” ë¬¸ì œì ì„ í•´ê²° í•  ìˆ˜ ìˆì–´ìš”.

